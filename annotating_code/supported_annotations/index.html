
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/koriym/psalm-ja/annotating_code/supported_annotations/">
      
      
        <link rel="prev" href="../type_syntax/intersection_types/">
      
      
        <link rel="next" href="../templated_annotations/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>サポートされているアノテーション - Psalm日本語ドキュメント</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
      


    
    

    

    
      <link rel="stylesheet" href="../../assets/css/mkdocs_material_extra.css">
    
      <link rel="stylesheet" href="../../assets/css/php.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docblock" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine classes -->





<!-- Header -->
<header class="md-header md-header--shadow" data-md-component="header">
  <nav
          class="md-header__inner md-grid"
          aria-label="Header"
  >

    <!-- Link to home -->
    <a
            href="../.."
            title="Psalm日本語ドキュメント"
            class="md-header__button md-logo"
            aria-label="Psalm日本語ドキュメント"
            data-md-component="logo"
    >
      
  <img src="../../assets/images/psalmlogo.jpg" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans'; font-size: 20px" >
            Psalm日本語ドキュメント
            </span>
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            <span style="font-family: 'Noto Sans Batak'; font-size: 20px" >
            
              サポートされているアノテーション
            
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    

    <!-- User preference: color palette -->
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>

    <!-- Search interface -->
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Psalm日本語ドキュメント" class="md-nav__button md-logo" aria-label="Psalm日本語ドキュメント" data-md-component="logo">
      
  <img src="../../assets/images/psalmlogo.jpg" alt="logo">

    </a>
    Psalm日本語ドキュメント
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ドキュメンテーションホーム
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Psalmの実行
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Psalmの実行
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    インストール
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設定
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    プラグイン
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            プラグイン
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/plugins/using_plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プラグインの使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/plugins/authoring_plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プラグインの作成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/plugins/plugins_type_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Psalmの型表現
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/command_line_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コマンドライン使用法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/language_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IDE サポート
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    エラーの扱い
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            エラーの扱い
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/dealing_with_code_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コードの問題への対処
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    問題の種類
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running_psalm/checking_non_php_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP以外のファイルのチェック
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    型のアノテーション
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            型のアノテーション
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typing_in_psalm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    型アノテーションの使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_syntax/union_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ユニオン型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_syntax/atomic_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アトミック型リファレンス
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_syntax/intersection_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    インターセクション型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    その他のアノテーション
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            その他のアノテーション
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    サポートされているアノテーション
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    サポートされているアノテーション
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#phpdoc" class="md-nav__link">
    <span class="md-ellipsis">
      PHPDocタグ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHPDocタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#var" class="md-nav__link">
    <span class="md-ellipsis">
      @varタグの非標準的な使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixins" class="md-nav__link">
    <span class="md-ellipsis">
      @mixins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psalm" class="md-nav__link">
    <span class="md-ellipsis">
      Psalm固有のタグ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Psalm固有のタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psalm-consistent-constructor" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-consistent-constructor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-consistent-templates" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-consistent-templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param-out-psalm-param-out" class="md-nav__link">
    <span class="md-ellipsis">
      @param-out, @psalm-param-out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-var-psalm-param-psalm-return-psalm-property-psalm-property-read-psalm-property-write-psalm-method" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-var, @psalm-param, @psalm-return, @psalm-property, @psalm-property-read, @psalm-property-write, @psalm-method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-var" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-var
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-suppress-someissuename" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-suppress SomeIssueName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-assert-psalm-assert-if-true-psalm-assert-if-false-psalm-if-this-is-psalm-this-out" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-assert, @psalm-assert-if-true, @psalm-assert-if-false, @psalm-if-this-is および @psalm-this-out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-nullable-return" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-nullable-return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-falsable-return" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-falsable-return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-seal-properties-psalm-no-seal-properties-seal-properties-no-seal-properties" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-seal-properties, @psalm-no-seal-properties, @seal-properties, @no-seal-properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-seal-methods-psalm-no-seal-methods-seal-methods-no-seal-methods" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-seal-methods, @psalm-no-seal-methods, @seal-methods, @no-seal-methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-internal" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-internal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-readonly-readonly" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-readonly および @readonly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-mutation-free" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-mutation-free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-external-mutation-free" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-external-mutation-free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-immutable" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-immutable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-pure" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-pure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-allow-private-mutation" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-allow-private-mutation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-readonly-allow-private-mutation" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-readonly-allow-private-mutation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-trace" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-trace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-check-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-check-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-check-type-exact" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-check-type-exact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-taint-" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-taint-*
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-import-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-import-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-require-extends" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-require-extends
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-require-implements" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-require-implements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-named-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      @no-named-arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-variable-property-psalm-ignore-variable-method" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-variable-property および @psalm-ignore-variable-method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-yield" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-yield
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-psalm-api" class="md-nav__link">
    <span class="md-ellipsis">
      @api, @psalm-api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-inheritors" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-inheritors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templated_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    テンプレートアノテーション
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding_assertions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アサートアノテーション
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    コードの操作
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            コードの操作
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manipulating_code/fixing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Psalterを使用したコードの修正
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manipulating_code/refactoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コードのリファクタリング
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    セキュリティ分析
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            セキュリティ分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    はじめに
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security_analysis/custom_taint_sources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    カスタム汚染源
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security_analysis/custom_taint_sinks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    カスタム汚染シンク
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security_analysis/avoiding_false_positives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    偽陽性を避ける
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    貢献
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#phpdoc" class="md-nav__link">
    <span class="md-ellipsis">
      PHPDocタグ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHPDocタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#var" class="md-nav__link">
    <span class="md-ellipsis">
      @varタグの非標準的な使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixins" class="md-nav__link">
    <span class="md-ellipsis">
      @mixins
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psalm" class="md-nav__link">
    <span class="md-ellipsis">
      Psalm固有のタグ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Psalm固有のタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psalm-consistent-constructor" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-consistent-constructor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-consistent-templates" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-consistent-templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param-out-psalm-param-out" class="md-nav__link">
    <span class="md-ellipsis">
      @param-out, @psalm-param-out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-var-psalm-param-psalm-return-psalm-property-psalm-property-read-psalm-property-write-psalm-method" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-var, @psalm-param, @psalm-return, @psalm-property, @psalm-property-read, @psalm-property-write, @psalm-method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-var" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-var
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-suppress-someissuename" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-suppress SomeIssueName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-assert-psalm-assert-if-true-psalm-assert-if-false-psalm-if-this-is-psalm-this-out" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-assert, @psalm-assert-if-true, @psalm-assert-if-false, @psalm-if-this-is および @psalm-this-out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-nullable-return" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-nullable-return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-falsable-return" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-falsable-return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-seal-properties-psalm-no-seal-properties-seal-properties-no-seal-properties" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-seal-properties, @psalm-no-seal-properties, @seal-properties, @no-seal-properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-seal-methods-psalm-no-seal-methods-seal-methods-no-seal-methods" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-seal-methods, @psalm-no-seal-methods, @seal-methods, @no-seal-methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-internal" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-internal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-readonly-readonly" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-readonly および @readonly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-mutation-free" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-mutation-free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-external-mutation-free" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-external-mutation-free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-immutable" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-immutable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-pure" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-pure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-allow-private-mutation" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-allow-private-mutation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-readonly-allow-private-mutation" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-readonly-allow-private-mutation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-trace" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-trace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-check-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-check-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-check-type-exact" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-check-type-exact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-taint-" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-taint-*
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-import-type" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-import-type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-require-extends" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-require-extends
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-require-implements" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-require-implements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-named-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      @no-named-arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-ignore-variable-property-psalm-ignore-variable-method" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-ignore-variable-property および @psalm-ignore-variable-method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-yield" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-yield
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-psalm-api" class="md-nav__link">
    <span class="md-ellipsis">
      @api, @psalm-api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psalm-inheritors" class="md-nav__link">
    <span class="md-ellipsis">
      @psalm-inheritors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="docblock">サポートされているdocblockアノテーション</h1>
<p>Psalmは幅広いdocblockアノテーションをサポートしています。</p>
<h2 id="phpdoc">PHPDocタグ</h2>
<p>Psalmはコードを理解するために以下のPHPDocタグを使用します：</p>
<ul>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/var.html"><code>@var</code></a>
  プロパティと変数の型を指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/return.html"><code>@return</code></a>
  関数、メソッド、クロージャの戻り値の型を指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/param.html"><code>@param</code></a>
  関数、メソッド、クロージャに渡されるパラメータの型を指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/property.html"><code>@property</code></a>
  <code>__get</code>と<code>__set</code>を使用するオブジェクトでアクセス可能なプロパティを指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/property.html"><code>@property-read</code></a>
  <code>__get</code>を使用するオブジェクトで読み取り可能なプロパティを指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/property.html"><code>@property-write</code></a>
  <code>__set</code>を使用するオブジェクトで書き込み可能なプロパティを指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/method.html"><code>@method</code></a>
  <code>__call</code>を使用するオブジェクトで利用可能なマジックメソッドを指定するために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/deprecated.html"><code>@deprecated</code></a>
  関数、メソッド、クラス、インターフェースが非推奨であることをマークするために使用されます</li>
<li><a href="https://docs.phpdoc.org/latest/guide/references/phpdoc/tags/internal.html"><code>@internal</code></a>
  アプリケーションやライブラリ内部のクラス、関数、プロパティをマークするために使用されます</li>
<li><a href="#mixins"><code>@mixin</code></a>
  現在のクラスが参照されたクラスのメソッドとプロパティをプロキシすることをPsalmに伝えるために使用されます</li>
</ul>
<h3 id="var"><code>@var</code>タグの非標準的な使用</h3>
<p><code>@var</code>タグは本来プロパティにのみ使用されるべきです。Psalmは、PHPStormやその他の静的解析ツールに倣って、<code>@var Type [VariableReference]</code>の形式でインラインでの使用を許可しています。</p>
<p><code>VariableReference</code>が提供される場合、それは<code>$variable</code>または<code>$variable-&gt;property</code>の形式である必要があります。代入の上で使用される場合、Psalmは<code>VariableReference</code>が代入される変数と一致するかどうかをチェックします。それらが異なる場合、Psalmは<code>Type</code>を<code>VariableReference</code>に割り当て、下の式で使用します。</p>
<p><code>VariableReference</code>が与えられない場合、このアノテーションは式の右側（代入であれ戻り値であれ）が<code>Type</code>型であることをPsalmに伝えます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span style="color: #BA2121; font-style: italic">/** @var string */</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span style="color: #19177C">$a</span> <span style="color: #666666">=</span> <span style="color: #19177C">$_GET</span>[<span style="color: #BA2121">&#39;foo&#39;</span>];
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span style="color: #BA2121; font-style: italic">/** @var string $b */</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span style="color: #19177C">$b</span> <span style="color: #666666">=</span> <span style="color: #19177C">$_GET</span>[<span style="color: #BA2121">&#39;bar&#39;</span>];
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">bat</span>()<span style="color: #666666">:</span> string {
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span style="color: #BA2121; font-style: italic">/** @var string */</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #19177C">$_GET</span>[<span style="color: #BA2121">&#39;bat&#39;</span>];
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>}
</span></code></pre></div>
<h3 id="mixins">@mixins</h3>
<p>クラスのdocblockに<code>@mixin</code>を追加すると、そのクラスが参照されたクラスのメソッドとプロパティをプロキシすることをPsalmに伝えます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>class A {
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    public string $a = &#39;A&#39;;
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    public function doA(): void
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    {
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    }
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>}
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>/** 
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a> * @mixin A 
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a> */
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>class B {
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    public string $b = &#39;B&#39;;
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    public function doB(): void
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    {
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    }
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    public function __call($name, $arguments)
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    {
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>        (new A())-&gt;$name(...$arguments);
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    }
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    public function __get($name)
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>    {
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>        return (new A())-&gt;$name;
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    }
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>}
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>$b = new B();
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>$b-&gt;doB();
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>$b-&gt;doA(); // 動作します
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>echo $b-&gt;b;
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>echo $b-&gt;a; // 動作します
</span></code></pre></div>
<h2 id="psalm">Psalm固有のタグ</h2>
<p>コードをPsalmがどのように扱うかを決定する多くのカスタムタグがあります。</p>
<h3 id="psalm-consistent-constructor"><code>@psalm-consistent-constructor</code></h3>
<p><a href="../running_psalm/issues/UnsafeInstantiation.md">UnsafeInstantiation</a>を参照してください。</p>
<h3 id="psalm-consistent-templates"><code>@psalm-consistent-templates</code></h3>
<p><a href="../running_psalm/issues/UnsafeGenericInstantiation.md">UnsafeGenericInstantiation</a>を参照してください。</p>
<h3 id="param-out-psalm-param-out"><code>@param-out</code>, <code>@psalm-param-out</code></h3>
<p>これは、参照渡しの型が入力時と異なることを指定するために使用されます。以下の関数では、最初のパラメータはnullである可能性がありますが、関数が実行された後、参照渡しの値はnullではありません。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span style="color: #BA2121; font-style: italic"> * @param-out string $s </span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">addFoo</span>(<span style="color: #666666">?</span>string <span style="color: #666666">&amp;</span><span style="color: #19177C">$s</span>) <span style="color: #666666">:</span> void {
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #19177C">$s</span> <span style="color: #666666">===</span> <span style="color: #008000; font-weight: bold">null</span>) {
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        <span style="color: #19177C">$s</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;hello&quot;</span>;
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    }
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span style="color: #19177C">$s</span> <span style="color: #666666">.=</span> <span style="color: #BA2121">&quot;foo&quot;</span>;
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>}
</span></code></pre></div>
<h3 id="psalm-var-psalm-param-psalm-return-psalm-property-psalm-property-read-psalm-property-write-psalm-method"><code>@psalm-var</code>, <code>@psalm-param</code>, <code>@psalm-return</code>, <code>@psalm-property</code>, <code>@psalm-property-read</code>, <code>@psalm-property-write</code>, <code>@psalm-method</code></h3>
<p>phpDocumentorでサポートされていない形式（<a href="#type-syntax">ただしPsalmでサポートされている</a>）で型を指定する場合、IDEを混乱させないように<code>@psalm-</code>をPHPDocタグの前に付けることができます。<code>@psalm-</code>プレフィックス付きのタグが与えられた場合、Psalmはそれをプレフィックスなしの対応するタグの代わりに使用します。</p>
<h3 id="psalm-ignore-var"><code>@psalm-ignore-var</code></h3>
<p>このアノテーションは、同じdocblockに書かれた<code>@var</code>アノテーションを無視するために使用されます。一部のIDEは、ジェネリクスのような複雑な型を完全には理解しません。そのようなIDEの自動補完を活用するために、Psalmが型を適切に推論できる場合でも、明示的な<code>@var</code>アノテーションを使用したい場合があります。多くの場合、明示的な<code>@var</code>アノテーションがPsalmの推論した型をオーバーライドするため、これは型チェックの効果を弱めます。Psalmは<code>@psalm-ignore-var</code>と共存する<code>@var</code>アノテーションを無視するため、IDEは自動補完のために<code>@var</code>で指定された型を使用でき、Psalmは型チェックのために独自の推論した型を使用できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span style="color: #BA2121; font-style: italic">/** @return iterable&lt;array-key,\DateTime&gt; */</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">getTimes</span>(int <span style="color: #19177C">$n</span>)<span style="color: #666666">:</span> iterable {
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span style="color: #008000; font-weight: bold">while</span> (<span style="color: #19177C">$n</span><span style="color: #666666">--</span>) {
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span style="color: #008000; font-weight: bold">yield</span> <span style="color: #008000; font-weight: bold">new</span> \DateTime();
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    }
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>};
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span style="color: #BA2121; font-style: italic"> * @var \Datetime[] $times</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span style="color: #BA2121; font-style: italic"> * @psalm-ignore-var </span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span style="color: #19177C">$times</span> <span style="color: #666666">=</span> getTimes(<span style="color: #666666">3</span>);
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span style="color: #3D7B7B; font-style: italic">// このトレースは &quot;array&lt;array-key, Datetime&gt;&quot; ではなく &quot;iterable&lt;array-key, DateTime&gt;&quot; を表示します</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span style="color: #BA2121; font-style: italic">/** @psalm-trace $times */</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span style="color: #008000; font-weight: bold">foreach</span> (<span style="color: #19177C">$times</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #19177C">$time</span>) {
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$time</span><span style="color: #666666">-&gt;</span><span style="color: #687822">format</span>(<span style="color: #BA2121">&#39;Y-m-d H:i:s.u&#39;</span>) <span style="color: #666666">.</span> PHP_EOL;
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>}
</span></code></pre></div>
<h3 id="psalm-suppress-someissuename"><code>@psalm-suppress SomeIssueName</code></h3>
<p>このアノテーションは問題を抑制するために使用されます。関数のdocblock、クラスのdocblock、そしてインラインでも使用でき、次の文に適用されます。</p>
<p>関数のdocblockの例：</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-suppress PossiblyNullOperand </span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">addString</span>(<span style="color: #666666">?</span>string <span style="color: #19177C">$s</span>) {
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #BA2121">&quot;hello &quot;</span> <span style="color: #666666">.</span> <span style="color: #19177C">$s</span>;
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>}
</span></code></pre></div>
<p>インラインの例：</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">addString</span>(<span style="color: #666666">?</span>string <span style="color: #19177C">$s</span>) {
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span style="color: #BA2121; font-style: italic">/** @psalm-suppress PossiblyNullOperand */</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #BA2121">&quot;hello &quot;</span> <span style="color: #666666">.</span> <span style="color: #19177C">$s</span>;
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>}
</span></code></pre></div>
<p><code>@psalm-suppress all</code>を使用して、個別にリストアップする代わりにすべての問題を抑制することができます。</p>
<h3 id="psalm-assert-psalm-assert-if-true-psalm-assert-if-false-psalm-if-this-is-psalm-this-out"><code>@psalm-assert</code>, <code>@psalm-assert-if-true</code>, <code>@psalm-assert-if-false</code>, <code>@psalm-if-this-is</code> および <code>@psalm-this-out</code></h3>
<p><a href="../adding_assertions/">アサーションの追加</a>を参照してください。</p>
<h3 id="psalm-ignore-nullable-return"><code>@psalm-ignore-nullable-return</code></h3>
<p>これは、関数/メソッドがnullを返すことについてPsalmに心配させないように使用できます。少し問題がありますが、非nullの値に対して非常に高い確信度がある場合や、他の関数がその特定のコードパスで非nullの値を保証している場合に時々便利です。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Foo</span> {}
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">takesFoo</span>(Foo <span style="color: #19177C">$f</span>)<span style="color: #666666">:</span> void {}
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span style="color: #BA2121; font-style: italic">/** @psalm-ignore-nullable-return */</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">getFoo</span>()<span style="color: #666666">:</span> <span style="color: #666666">?</span>Foo {
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">rand</span>(<span style="color: #666666">0</span>, <span style="color: #666666">10000</span>) <span style="color: #666666">&gt;</span> <span style="color: #666666">1</span> <span style="color: #666666">?</span> <span style="color: #008000; font-weight: bold">new</span> Foo() <span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">null</span>;
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>}
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>takesFoo(getFoo());
</span></code></pre></div>
<h3 id="psalm-ignore-falsable-return"><code>@psalm-ignore-falsable-return</code></h3>
<p>これは<code>false</code>に対して同じことを提供しますが、Psalmは内部的にこれを<code>preg_replace</code>のような関数に使用しています。これらの関数は、与えられた入力にエンコーディングエラーがある場合にfalseを返す可能性がありますが、99.9%の場合、関数は期待通りに動作します。</p>
<h3 id="psalm-seal-properties-psalm-no-seal-properties-seal-properties-no-seal-properties"><code>@psalm-seal-properties</code>, <code>@psalm-no-seal-properties</code>, <code>@seal-properties</code>, <code>@no-seal-properties</code></h3>
<p>マジックプロパティゲッター/セッターがある場合、<code>@psalm-seal-properties</code>を使用して、<code>@property</code>（または<code>@property-read</code>/<code>@property-write</code>）アノテーションのリストに含まれていないプロパティの取得と設定を禁止するようPsalmに指示できます。</p>
<p>これは設定オプション<code>sealAllProperties</code>で自動的に有効になり、<code>@psalm-no-seal-properties</code>を使ってクラスに対して無効にできます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span style="color: #BA2121; font-style: italic"> * @property string $foo</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span style="color: #BA2121; font-style: italic"> * @seal-properties </span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">A</span> {
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__get</span>(string <span style="color: #19177C">$name</span>)<span style="color: #666666">:</span> <span style="color: #666666">?</span>string {
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #19177C">$name</span> <span style="color: #666666">===</span> <span style="color: #BA2121">&quot;foo&quot;</span>) {
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;hello&quot;</span>;
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        }
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    }
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__set</span>(string <span style="color: #19177C">$name</span>, <span style="color: #19177C">$value</span>)<span style="color: #666666">:</span> void {}
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>}
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span style="color: #19177C">$a</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> A();
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span style="color: #19177C">$a</span><span style="color: #666666">-&gt;</span><span style="color: #687822">bar</span> <span style="color: #666666">=</span> <span style="color: #666666">5</span>; <span style="color: #3D7B7B; font-style: italic">// この呼び出しは失敗します</span>
</span></code></pre></div>
<h3 id="psalm-seal-methods-psalm-no-seal-methods-seal-methods-no-seal-methods"><code>@psalm-seal-methods</code>, <code>@psalm-no-seal-methods</code>, <code>@seal-methods</code>, <code>@no-seal-methods</code></h3>
<p>マジックメソッド呼び出し機能がある場合、<code>@psalm-seal-methods</code>を使用して、<code>@method</code>アノテーションのリストに含まれていないメソッドの呼び出しを禁止するようPsalmに指示できます。</p>
<p>これは設定オプション<code>sealAllMethods</code>で自動的に有効になり、<code>@psalm-no-seal-methods</code>を使ってクラスに対して無効にできます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span style="color: #BA2121; font-style: italic"> * @method foo(): string</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span style="color: #BA2121; font-style: italic"> * @seal-methods </span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">A</span> {
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__call</span>(string <span style="color: #19177C">$name</span>, <span style="color: #008000; font-weight: bold">array</span> <span style="color: #19177C">$args</span>) {
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>        <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #19177C">$name</span> <span style="color: #666666">===</span> <span style="color: #BA2121">&quot;foo&quot;</span>) {
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&quot;hello&quot;</span>;
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>        }
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    }
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>}
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span style="color: #19177C">$a</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> A();
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span style="color: #19177C">$b</span> <span style="color: #666666">=</span> <span style="color: #19177C">$a</span><span style="color: #666666">-&gt;</span><span style="color: #687822">bar</span>(); <span style="color: #3D7B7B; font-style: italic">// この呼び出しは失敗します</span>
</span></code></pre></div>
<h3 id="psalm-internal"><code>@psalm-internal</code></h3>
<p>クラス、プロパティ、または関数を特定の名前空間に内部的なものとしてマークするために使用されます。PsalmはこれをPHPDocの<code>@internal</code>タグとは少し異なる方法で扱います。<code>@internal</code>の場合、呼び出しコードが呼び出しコードの名前空間と完全に無関係な名前空間にある場合（つまり、名前空間の最初の要素を共有していない場合）に問題が発生します。</p>
<p>対照的に、<code>@psalm-internal</code>の場合、docblockの行で名前空間を指定する必要があります。呼び出しコードが指定された名前空間内にない場合に問題が発生します。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span style="color: #008000; font-weight: bold">namespace</span> A\B {
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span style="color: #BA2121; font-style: italic">     * @internal</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span style="color: #BA2121; font-style: italic">     * @psalm-internal A\B</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span style="color: #BA2121; font-style: italic">     */</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>    <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Foo</span> { }
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>}
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span style="color: #008000; font-weight: bold">namespace</span> A\B\C {
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Bat</span> {
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>        <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">batBat</span>()<span style="color: #666666">:</span> void {
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>            <span style="color: #19177C">$a</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> \A\B\Foo();  <span style="color: #3D7B7B; font-style: italic">// これは問題ありません</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>        }
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>    }
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>}
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span style="color: #008000; font-weight: bold">namespace</span> A\C {
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>    <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Bat</span> {
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>        <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">batBat</span>()<span style="color: #666666">:</span> void {
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>            <span style="color: #19177C">$a</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> \A\B\Foo();  <span style="color: #3D7B7B; font-style: italic">// エラー</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>        }
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>    }
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>}
</span></code></pre></div>
<h3 id="psalm-readonly-readonly"><code>@psalm-readonly</code> および <code>@readonly</code></h3>
<p>定義クラスのコンストラクタでのみ書き込み可能なプロパティにアノテーションを付けるために使用されます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">B</span> {
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>  <span style="color: #BA2121; font-style: italic">/** @readonly */</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>  <span style="color: #008000; font-weight: bold">public</span> string <span style="color: #19177C">$s</span>;
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__construct</span>(string <span style="color: #19177C">$s</span>) {
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">=</span> <span style="color: #19177C">$s</span>;
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>  }
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>}
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span style="color: #19177C">$b</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> B(<span style="color: #BA2121">&quot;hello&quot;</span>);
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$b</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span>;
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span style="color: #19177C">$b</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;boo&quot;</span>; <span style="color: #3D7B7B; font-style: italic">// 許可されません</span>
</span></code></pre></div>
<h3 id="psalm-mutation-free"><code>@psalm-mutation-free</code></h3>
<p>クラスのスコープ内外で状態を変更しないクラスメソッドにアノテーションを付けるために使用されます。
これは、戻り値がインスタンスのプロパティにのみ依存することを要求します。例えば、<code>random_int</code>は乱数生成器の内部状態を変更するため、ここでは変更とみなされます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">D</span> {
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>  <span style="color: #008000; font-weight: bold">private</span> string <span style="color: #19177C">$s</span>;
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__construct</span>(string <span style="color: #19177C">$s</span>) {
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">=</span> <span style="color: #19177C">$s</span>;
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>  }
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span style="color: #BA2121; font-style: italic">   * @psalm-mutation-free</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">getShort</span>() <span style="color: #666666">:</span> string {
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">substr</span>(<span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span>, <span style="color: #666666">0</span>, <span style="color: #666666">5</span>);
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>  }
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span style="color: #BA2121; font-style: italic">   * @psalm-mutation-free</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">getShortMutating</span>() <span style="color: #666666">:</span> string {
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">.=</span> <span style="color: #BA2121">&quot;hello&quot;</span>; <span style="color: #3D7B7B; font-style: italic">// これはバグです</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">substr</span>(<span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span>, <span style="color: #666666">0</span>, <span style="color: #666666">5</span>);
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>  }
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>}
</span></code></pre></div>
<h3 id="psalm-external-mutation-free"><code>@psalm-external-mutation-free</code></h3>
<p>クラスのスコープ外で状態を変更しないクラスメソッドにアノテーションを付けるために使用されます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">E</span> {
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>  <span style="color: #008000; font-weight: bold">private</span> string <span style="color: #19177C">$s</span>;
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__construct</span>(string <span style="color: #19177C">$s</span>) {
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">=</span> <span style="color: #19177C">$s</span>;
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>  }
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span style="color: #BA2121; font-style: italic">   * @psalm-external-mutation-free</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">getShortMutating</span>() <span style="color: #666666">:</span> string {
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span> <span style="color: #666666">.=</span> <span style="color: #BA2121">&quot;hello&quot;</span>; <span style="color: #3D7B7B; font-style: italic">// これは問題ありません</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">substr</span>(<span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span>, <span style="color: #666666">0</span>, <span style="color: #666666">5</span>);
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>  }
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span style="color: #BA2121; font-style: italic">   * @psalm-external-mutation-free</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">save</span>() <span style="color: #666666">:</span> void {
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>    <span style="color: #008000">file_put_contents</span>(<span style="color: #BA2121">&quot;foo.txt&quot;</span>, <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">s</span>); <span style="color: #3D7B7B; font-style: italic">// これはバグです</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>  }
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>}
</span></code></pre></div>
<h3 id="psalm-immutable"><code>@psalm-immutable</code></h3>
<p>すべてのプロパティが消費者によって<code>@psalm-readonly</code>として扱われ、すべてのインスタンスメソッドが<code>@psalm-mutation-free</code>として扱われるクラスにアノテーションを付けるために使用されます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-immutable </span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span style="color: #008000; font-weight: bold">abstract</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Foo</span> {
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span style="color: #008000; font-weight: bold">public</span> string <span style="color: #19177C">$baz</span>;
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    <span style="color: #008000; font-weight: bold">abstract</span> <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">bar</span>()<span style="color: #666666">:</span> int;
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>}
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span style="color: #BA2121; font-style: italic"> * @psalm-immutable </span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span style="color: #008000; font-weight: bold">final</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">ChildClass</span> <span style="color: #008000; font-weight: bold">extends</span> Foo {
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__construct</span>(string <span style="color: #19177C">$baz</span>)
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>    {
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>        <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">baz</span> <span style="color: #666666">=</span> <span style="color: #19177C">$baz</span>;
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>    }
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">bar</span>()<span style="color: #666666">:</span> int
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>    {
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>    }
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>}
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span style="color: #19177C">$anonymous</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #BA2121; font-style: italic">/** @psalm-immutable */</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">extends</span> Foo {
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>    <span style="color: #008000; font-weight: bold">public</span> string <span style="color: #19177C">$baz</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;B&quot;</span>;
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">bar</span>()<span style="color: #666666">:</span> int
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>    {
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">1</span>;
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>    }
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>};
</span></code></pre></div>
<h3 id="psalm-pure"><code>@psalm-pure</code></h3>
<p><a href="https://en.wikipedia.org/wiki/Pure_function">純粋関数</a> - その出力が入力のみの関数であるもの - にアノテーションを付けるために使用されます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Arithmetic</span> {
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  <span style="color: #BA2121; font-style: italic">/** @psalm-pure */</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">static</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">add</span>(int <span style="color: #19177C">$left</span>, int <span style="color: #19177C">$right</span>) <span style="color: #666666">:</span> int {
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #19177C">$left</span> <span style="color: #666666">+</span> <span style="color: #19177C">$right</span>;
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>  }
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>  <span style="color: #BA2121; font-style: italic">/** @psalm-pure - これは間違っています */</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">static</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">addCumulative</span>(int <span style="color: #19177C">$left</span>) <span style="color: #666666">:</span> int {
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span style="color: #BA2121; font-style: italic">/** @var int */</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>    <span style="color: #008000; font-weight: bold">static</span> <span style="color: #19177C">$i</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>; <span style="color: #3D7B7B; font-style: italic">// これは副作用であり、したがってバグです</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>    <span style="color: #19177C">$i</span> <span style="color: #666666">+=</span> <span style="color: #19177C">$left</span>;
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #19177C">$i</span>;
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>  }
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>}
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span style="color: #008000; font-weight: bold">echo</span> Arithmetic<span style="color: #666666">::</span><span style="color: #687822">add</span>(<span style="color: #666666">40</span>, <span style="color: #666666">2</span>);
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span style="color: #008000; font-weight: bold">echo</span> Arithmetic<span style="color: #666666">::</span><span style="color: #687822">add</span>(<span style="color: #666666">40</span>, <span style="color: #666666">2</span>); <span style="color: #3D7B7B; font-style: italic">// 同じ値が出力されます</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span style="color: #008000; font-weight: bold">echo</span> Arithmetic<span style="color: #666666">::</span><span style="color: #687822">addCumulative</span>(<span style="color: #666666">3</span>); <span style="color: #3D7B7B; font-style: italic">// 3を出力します</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span style="color: #008000; font-weight: bold">echo</span> Arithmetic<span style="color: #666666">::</span><span style="color: #687822">addCumulative</span>(<span style="color: #666666">3</span>); <span style="color: #3D7B7B; font-style: italic">// 6を出力します</span>
</span></code></pre></div>
<p>一方、<code>pure-callable</code>は純粋である必要があるコールバックを示すために使用できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>/** 
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a> * @param pure-callable(mixed): int $callback 
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a> */
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>function foo(callable $callback) {...}
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>// これは失敗します。random_intは純粋ではないため
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>foo(
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    /** @param mixed $p */
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    fn($p) =&gt; random_int(1, 2)
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>);
</span></code></pre></div>
<h3 id="psalm-allow-private-mutation"><code>@psalm-allow-private-mutation</code></h3>
<p>privateコンテキストで変更可能な読み取り専用プロパティにアノテーションを付けるために使用されます。これにより、publicプロパティは別のクラスから読み取ることができますが、自身のクラスのメソッド内でのみ変更できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Counter</span> {
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span style="color: #BA2121; font-style: italic">   * @readonly</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span style="color: #BA2121; font-style: italic">   * @psalm-allow-private-mutation</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>  <span style="color: #008000; font-weight: bold">public</span> int <span style="color: #19177C">$count</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>;
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">increment</span>() <span style="color: #666666">:</span> void {
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span><span style="color: #666666">++</span>;
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>  }
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>}
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span style="color: #19177C">$counter</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> Counter();
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span>; <span style="color: #3D7B7B; font-style: italic">// 0を出力します</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">increment</span>(); <span style="color: #3D7B7B; font-style: italic">// メソッドはプロパティを変更できます</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span>; <span style="color: #3D7B7B; font-style: italic">// 1を出力します</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span> <span style="color: #666666">=</span> <span style="color: #666666">5</span>; <span style="color: #3D7B7B; font-style: italic">// これは失敗します。プロパティを直接変更しているため</span>
</span></code></pre></div>
<h3 id="psalm-readonly-allow-private-mutation"><code>@psalm-readonly-allow-private-mutation</code></h3>
<p>これは、プロパティアノテーション<code>@readonly</code>と<code>@psalm-allow-private-mutation</code>の省略形です。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Counter</span> {
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>  <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span style="color: #BA2121; font-style: italic">   * @psalm-readonly-allow-private-mutation</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span style="color: #BA2121; font-style: italic">   */</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>  <span style="color: #008000; font-weight: bold">public</span> int <span style="color: #19177C">$count</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>;
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>  <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">increment</span>() <span style="color: #666666">:</span> void {
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span><span style="color: #666666">++</span>;
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>  }
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>}
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span style="color: #19177C">$counter</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> Counter();
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span>; <span style="color: #3D7B7B; font-style: italic">// 0を出力します</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">increment</span>(); <span style="color: #3D7B7B; font-style: italic">// メソッドはプロパティを変更できます</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span>; <span style="color: #3D7B7B; font-style: italic">// 1を出力します</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span style="color: #19177C">$counter</span><span style="color: #666666">-&gt;</span><span style="color: #687822">count</span> <span style="color: #666666">=</span> <span style="color: #666666">5</span>; <span style="color: #3D7B7B; font-style: italic">// これは失敗します。プロパティを直接変更しているため</span>
</span></code></pre></div>
<h3 id="psalm-trace"><code>@psalm-trace</code></h3>
<p>このアノテーションを使用して、推論された型をトレースできます（<em>次の</em>文に適用されます）。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span style="color: #BA2121; font-style: italic">/** @psalm-trace $username */</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span style="color: #19177C">$username</span> <span style="color: #666666">=</span> <span style="color: #19177C">$_GET</span>[<span style="color: #BA2121">&#39;username&#39;</span>]; <span style="color: #3D7B7B; font-style: italic">// &quot;test.php:4 $username: mixed&quot; のようなものを出力します</span>
</span></code></pre></div>
<p><em>注意</em>: これは<a href="../running_psalm/issues/Trace.md">特別な低レベルの問題</a>をスローします。
これを見るには、グローバルの<code>errorLevel</code>を1に設定するか、Psalmを<code>--show-info=true</code>で呼び出すことができますが、どちらの解決策も多くの出力を生成する可能性があります。もう一つの解決策は、問題のエラーレベルを選択的に上げて、1つだけ余分なエラーを得ることです：</p>
<div class="language-xml highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span style="color: #3D7B7B; font-style: italic">&lt;!-- psalm.xml --&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span style="color: #008000; font-weight: bold">&lt;issueHandlers&gt;</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">&lt;Trace</span><span style="color: #bbbbbb"> </span><span style="color: #687822">errorLevel=</span><span style="color: #BA2121">&quot;error&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span style="color: #008000; font-weight: bold">&lt;/issueHandlers&gt;</span>
</span></code></pre></div>
<h3 id="psalm-check-type"><code>@psalm-check-type</code></h3>
<p>このアノテーションを使用して、推論された型が期待するものと一致することを確認できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span style="color: #BA2121; font-style: italic">/** @psalm-check-type $foo = int */</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span style="color: #19177C">$foo</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>; <span style="color: #3D7B7B; font-style: italic">// 問題なし</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span style="color: #BA2121; font-style: italic">/** @psalm-check-type $bar = int */</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span style="color: #19177C">$bar</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;not-an-int&quot;</span>; <span style="color: #3D7B7B; font-style: italic">// チェックされた変数 $bar = int は $bar = &#39;not-an-int&#39; と一致しません</span>
</span></code></pre></div>
<h3 id="psalm-check-type-exact"><code>@psalm-check-type-exact</code></h3>
<p><code>@psalm-check-type</code>と同様ですが、サブタイプを許可せずに変数の正確な型をチェックします。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span style="color: #BA2121; font-style: italic">/** @psalm-check-type-exact $foo = int */</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span style="color: #19177C">$foo</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>; <span style="color: #3D7B7B; font-style: italic">// チェックされた変数 $foo = int は $foo = 1 と一致しません</span>
</span></code></pre></div>
<h3 id="psalm-taint-"><code>@psalm-taint-*</code></h3>
<p><a href="../../security_analysis/annotations/">セキュリティ分析アノテーション</a>を参照してください。</p>
<h3 id="psalm-type"><code>@psalm-type</code></h3>
<p>これを使用して、別の型のエイリアスを定義できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-type PhoneType = array{phone: string} </span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Phone</span> {
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span style="color: #BA2121; font-style: italic">     * @psalm-return PhoneType</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span style="color: #BA2121; font-style: italic">     */</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">toArray</span>()<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">array</span> {
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>        <span style="color: #008000; font-weight: bold">return</span> [<span style="color: #BA2121">&quot;phone&quot;</span> <span style="color: #666666">=&gt;</span> <span style="color: #BA2121">&quot;Nokia&quot;</span>];
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>    }
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>}
</span></code></pre></div>
<h3 id="psalm-import-type"><code>@psalm-import-type</code></h3>
<p>このアノテーションを使用して、<a href="#psalm-type"><code>@psalm-type</code></a>で定義された型を、それが他の場所で定義されている場合にインポートできます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-import-type PhoneType from Phone </span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">User</span> {
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>    <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span style="color: #BA2121; font-style: italic">     * @psalm-return PhoneType</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span style="color: #BA2121; font-style: italic">     */</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">toArray</span>()<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">array</span> {
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">array_merge</span>([], (<span style="color: #008000; font-weight: bold">new</span> Phone())<span style="color: #666666">-&gt;</span><span style="color: #687822">toArray</span>());
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>    }
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>}
</span></code></pre></div>
<p>インポート時に型にエイリアスを付けることもできます：</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-import-type PhoneType from Phone as MyPhoneTypeAlias </span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">User</span> {
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>    <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span style="color: #BA2121; font-style: italic">     * @psalm-return MyPhoneTypeAlias</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span style="color: #BA2121; font-style: italic">     */</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">toArray</span>()<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">array</span> {
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">array_merge</span>([], (<span style="color: #008000; font-weight: bold">new</span> Phone())<span style="color: #666666">-&gt;</span><span style="color: #687822">toArray</span>());
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>    }
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>}
</span></code></pre></div>
<h3 id="psalm-require-extends"><code>@psalm-require-extends</code></h3>
<p><code>@psalm-require-extends</code>アノテーションを使用すると、トレイトが使用クラスに課す要件を定義できます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span style="color: #008000; font-weight: bold">abstract</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">DatabaseModel</span> {
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>  <span style="color: #3D7B7B; font-style: italic">// メソッド、プロパティなど</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>}
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span style="color: #BA2121; font-style: italic"> * @psalm-require-extends DatabaseModel </span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span style="color: #008000; font-weight: bold">trait</span> SoftDeletingTrait {
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>  <span style="color: #3D7B7B; font-style: italic">// 有用だが、スコープが限定された機能。DatabaseModelのメソッド/プロパティに依存しています</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>}
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">MyModel</span> <span style="color: #008000; font-weight: bold">extends</span> DatabaseModel {
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>  <span style="color: #3D7B7B; font-style: italic">// 有効</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>  <span style="color: #008000; font-weight: bold">use</span> SoftDeletingTrait;
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>}
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">NormalClass</span> {
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>  <span style="color: #3D7B7B; font-style: italic">// エラーをトリガーします</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>  <span style="color: #008000; font-weight: bold">use</span> SoftDeletingTrait;
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>}
</span></code></pre></div>
<h3 id="psalm-require-implements"><code>@psalm-require-implements</code></h3>
<p><code>@psalm-require-extends</code>と同じように動作しますが、インターフェースに対してです。</p>
<h3 id="no-named-arguments"><code>@no-named-arguments</code></h3>
<p>これは、名前付きパラメータを使用して関数やメソッドにアクセスすることを防ぎます（<code>NamedArgumentNotAllowed</code>問題を発生させます）。
偶然にも、以下のコードの推論される型が変更されます：</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>    <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">a</span>(int <span style="color: #666666">...</span><span style="color: #19177C">$a</span>){
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>        <span style="color: #008000">var_dump</span>(<span style="color: #19177C">$a</span>);
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>    }
</span></code></pre></div>
<p><code>$a</code>の型は<code>@no-named-arguments</code>がない場合は<code>array&lt;array-key, int&gt;</code>ですが、それがある場合は<code>list&lt;int&gt;</code>になります。これは、パラメータ名を持つ文字列オフセットのケースを除外するためです。</p>
<h3 id="psalm-ignore-variable-property-psalm-ignore-variable-method"><code>@psalm-ignore-variable-property</code> および <code>@psalm-ignore-variable-method</code></h3>
<p>デッドコードを探す際に変数プロパティフェッチ / 変数メソッド呼び出しを無視するようPsalmに指示します。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>class Foo {
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>    // このプロパティはPsalterによって削除される可能性があります
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>    // get()内の潜在的な参照は無視されるため
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    public string $bar = &#39;bar&#39;;
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>    public function get(string $name): mixed
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>    {
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>        /** @psalm-ignore-variable-property */
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>        return $this-&gt;{$name};
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>    }
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>}
</span></code></pre></div>
<p>Psalmが変数プロパティに遭遇した場合、与えられたクラス内のすべてのプロパティが潜在的に参照されているものとして扱います。
<code>@psalm-ignore-variable-property</code>アノテーションを使用すると、この参照は無視されます。
両方のケースで<code>PossiblyUnusedProperty</code>が発生しますが、<code>@psalm-ignore-variable-property</code>を使用すると、<a href="../../manipulating_code/fixing/">Psalter</a>が<code>Foo::$bar</code>を削除できるようになります。</p>
<p><code>@psalm-ignore-variable-method</code>は同じように動作しますが、変数メソッド呼び出しに対してです。</p>
<h3 id="psalm-yield"><code>@psalm-yield</code></h3>
<p>アノテーションが付けられたオブジェクトインスタンスがyieldされたときに、ジェネレータに送り返される値の型を指定するために使用されます。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span style="color: #BA2121; font-style: italic"> * @template-covariant TValue</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span style="color: #BA2121; font-style: italic"> * @psalm-yield TValue</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span style="color: #008000; font-weight: bold">interface</span> Promise {}
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span style="color: #BA2121; font-style: italic"> * @template-covariant TValue</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span style="color: #BA2121; font-style: italic"> * @template-implements Promise&lt;TValue&gt;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Success</span> <span style="color: #008000; font-weight: bold">implements</span> Promise {
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>    <span style="color: #BA2121; font-style: italic">/**</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span style="color: #BA2121; font-style: italic">     * @psalm-param TValue $value</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span style="color: #BA2121; font-style: italic">     */</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">__construct</span>(<span style="color: #19177C">$value</span>) {}
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>}
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span style="color: #BA2121; font-style: italic"> * @return Promise&lt;string&gt;</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a><span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">fetch</span>()<span style="color: #666666">:</span> Promise {
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">new</span> Success(<span style="color: #BA2121">&#39;{&quot;data&quot;:[]}&#39;</span>);
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>}
</span><span id="__span-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>
</span><span id="__span-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a><span style="color: #008000; font-weight: bold">function</span> ()<span style="color: #666666">:</span> Generator {
</span><span id="__span-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a>    <span style="color: #19177C">$data</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">yield</span> fetch();
</span><span id="__span-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>
</span><span id="__span-28-29"><a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a>    <span style="color: #3D7B7B; font-style: italic">// これは問題ありません。Psalmは$dataが文字列であることを知っています</span>
</span><span id="__span-28-30"><a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a>    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">json_decode</span>(<span style="color: #19177C">$data</span>);
</span><span id="__span-28-31"><a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a>};
</span></code></pre></div>
<p>このアノテーションはジェネリック型のみをサポートしています。つまり、例えば<code>@psalm-yield string</code>は無視されます。</p>
<h3 id="api-psalm-api"><code>@api</code>, <code>@psalm-api</code></h3>
<p>クラスやメソッドが使用されていることをPsalmに伝えるために使用されます。これは、コード内に明示的な参照が見つからない場合でも使用されます。未使用の問題は抑制されます。</p>
<p>例えば、フレームワークでは、コントローラはしばしば「魔法のように」呼び出され、コード内に明示的な参照がありません。これらのクラスには<code>@psalm-api</code>をマークする必要があります。</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>/** 
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a> * @psalm-api 
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a> */
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>class UnreferencedClass {}
</span></code></pre></div>
<h3 id="psalm-inheritors"><code>@psalm-inheritors</code></h3>
<p>クラスが特定のサブセットのクラスによってのみ拡張できることをPsalmに伝えるために使用されます。</p>
<p>例えば、</p>
<div class="language-php highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span style="color: #9C6500">&lt;?php</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span style="color: #BA2121; font-style: italic">/** </span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span style="color: #BA2121; font-style: italic"> * @psalm-inheritors FooClass|BarClass </span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span style="color: #BA2121; font-style: italic"> */</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BaseClass</span> {}
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">FooClass</span> <span style="color: #008000; font-weight: bold">extends</span> BaseClass {}
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BarClass</span> <span style="color: #008000; font-weight: bold">extends</span> BaseClass {}
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BazClass</span> <span style="color: #008000; font-weight: bold">extends</span> BaseClass {} <span style="color: #3D7B7B; font-style: italic">// これはエラーです</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "hide_repository_button"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>